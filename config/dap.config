############################################################
# Configuration settings for Conjur POC environment
############################################################

# PLATFORM
# openshift -> configure for openshift
# kubernetes -> configure for kubernetes
export PLATFORM=openshift

# CONNECTED
# true -> scripts will build missing images assuming internet connectivity
# false -> scripts assume no internet connectivity
export CONNECTED=false

# NO_DNS
# true -> assumes no DNS support & adds entries to /etc/hosts
# false -> assumes DNS support & hostnames will resolve to IP addresses
export NO_DNS=true

# CONJUR_FOLLOWERS_IN_CLUSTER
# true -> run Followers in k8s/ocp cluster
# false -> authenticate to Follower running on Master host
export CONJUR_FOLLOWERS_IN_CLUSTER=true

############################################################
#              Conjur Master Cluster settings
############################################################

export CONJUR_MASTER_HOST_NAME=
export CONJUR_MASTER_HOST_IP=
export CONJUR_MASTER_PORT=443
export CONJUR_FOLLOWER_PORT=444  # for follower on master host only
export CONJUR_ACCOUNT=
export CONJUR_ADMIN_PASSWORD=	 # password to set for default admin user
export CONJUR_APPLIANCE_IMAGE=
export CLI_IMAGE_NAME=

# Cluster namespace (project) for Conjur Follower cluster role, etc.
export CONJUR_NAMESPACE_NAME=cyberark

# Directory in which to write Master cert and seed file
export CACHE_DIR=~/conjur-etc


###########################################################
# Values below should not be changed
###########################################################

# docker network name for conjur master cluster
export CONJUR_NETWORK=conjurnetwork
export CONJUR_AUDIT_VOLUME=cybraudit   # shared volume for audit logs
export CONJUR_NGINX_VOLUME=cybrnginx   # shared volume for nginx logs

###########################################################
# Alt-names for conjur master cert
export MASTER_ALTNAMES="$CONJUR_MASTER_HOST_NAME"

# Alt-names for conjur follower cert - followers may run on master host or in cluster
if $CONJUR_FOLLOWERS_IN_CLUSTER; then
    export CONJUR_FOLLOWER_SERVICE_NAME=conjur-follower.$CONJUR_NAMESPACE_NAME.svc.cluster.local
else
    export CONJUR_FOLLOWER_SERVICE_NAME=$CONJUR_MASTER_HOST_NAME:$CONJUR_FOLLOWER_PORT
fi
export FOLLOWER_ALTNAMES="$CONJUR_MASTER_HOST_NAME,$CONJUR_FOLLOWER_SERVICE_NAME"

export CONJUR_MASTER_CONTAINER_NAME=conjur1
export CONJUR_STANDBY1_NAME=conjur2
export CONJUR_STANDBY2_NAME=conjur3
export HAPROXY_CONTAINER_NAME=conjur-haproxy
export CONJUR_FOLLOWER_CONTAINER_NAME=conjur-follower
export CLI_CONTAINER_NAME=conjur-cli
export CONJUR_MASTER_PGSYNC_PORT=5432
export CONJUR_MASTER_PGAUDIT_PORT=1999
export CONJUR_APPLIANCE_URL=https://$CONJUR_MASTER_HOST_NAME:$CONJUR_MASTER_PORT
export CONJUR_VERSION=5

export MASTER_CERT_FILE=$CACHE_DIR/conjur-master-$CONJUR_ACCOUNT.pem
export FOLLOWER_CERT_FILE=$CACHE_DIR/conjur-follower-$CONJUR_ACCOUNT.pem
export FOLLOWER_SEED_FILE=$CACHE_DIR/follower-seed.tar
